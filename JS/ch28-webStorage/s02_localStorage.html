<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>로컬 스토리지</title>
<script type="text/javascript">
    window.onload=function(){
        //초기값 설정
        load_setting();

        //이벤트 연결
        let myForm = document.getElementById('frm');    //form에 접근
        myForm.onsubmit=function(event){
            //기본 이벤트 제거
            event.preventDefault();

            //로컬스토리지에 설정값 저장
            save_setting();
        }

    }
    //로컬 스토리지에 설정값 저장할 함수
    function save_setting(){
        let bg_color=document.getElementById('bg_color');
        let text_color = document.getElementById('text_color');
        let text_size = document.getElementById('text_size');   //각각의 태그에 접근

        //로컬 스토리지에 설정값 저장
        localStorage.setItem('bg_color',bg_color.value); //key-value
        localStorage.setItem('text_color',text_color.value);
        localStorage.setItem('text_size',text_size.value);      //이 단계에서 저장 완료

        //스타일을 반영해줌
        apply_data();
    }
    //로컬 스토리지에 저장된 데이터를 불러올 함수
    function load_setting(){
        let bgcolor = localStorage.getItem('bg_color');
        let textcolor = localStorage.getItem('text_color');
        let textsize = localStorage.getItem('text_size');

        //로컬 스토리지에서 읽어온 데이터를 태그에 표시
        document.getElementById('bg_color').value = bgcolor;
        document.getElementById('text_color').value = textcolor;
        document.getElementById('text_size').value = textsize;

        //스타일 반영
        apply_data();
    }
    //스타일을 태그에 반영하는 함수
    function apply_data(){
        let bg_color = document.getElementById('bg_color');
        let text_color = document.getElementById('text_color');
        let text_size = document.getElementById('text_size');

        //스타일 적용
        document.body.style.backgroundColor = bg_color.value;
        document.body.style.color = text_color.value;
        document.body.style.fontSize = text_size.value;
    }
</script>
</head>
<body>
	<h2>환경 설정 값 기억</h2>
    <form id="frm">
        <fieldset>
            <legend>색상/글자 크기 선택</legend>
            <ul>
                <li>
                    <label for="bg_color">배경색</label>
                     <input type="text" name="bg_color" id="bg_color">
                </li>
                <li>
                    <label for="text_color">글자색</label>
                    <input type="text" name="text_color" id="text_color">
                </li>
                <li>
                    <label for="text_size">글자크기</label>
                    <select name="text_size" id="text_size">
                        <option value="16px">16px</option>
                        <option value="20px">20px</option>
                        <option value="24px">24px</option>
                    </select>
                </li>
            </ul>
            <input type="submit" value="저장">
        </fieldset>
    </form>
</body>
</html>



